(function(e,b,a,g){var d="jangoEndless",f={handlebarsTemplate:null,appendTo:null,sourceURL:"",eventElementID:null,removeEventElementParent:true};function c(h,i){this.container=e(h);this.settings=i;this._defaults=f;this._name=d;this.url="";this.eventElement=null;this.init()}c.prototype={init:function(){this.primeEventListeners()},getEventElement:function(){if(this.settings.eventElementID){this.eventElement=e(this.settings.eventElementID)}},primeEventListeners:function(){this.getEventElement();this.determineURL();var h=this;this.eventElement.on("click",function(i){i.preventDefault();if(h.eventElement.data("disabled")){return}h.disableElement();h.sendAjaxRequest()})},determineURL:function(){if(!this.url){if(this.settings.sourceURL){this.url=this.settings.sourceURL}else{if(this.eventElement){if(this.eventElement.attr("href")){this.url=this.eventElement.attr("href")}else{if(!e(this.eventElement).length){console.log("No more to load!");return}console.log("Please add a href attribute to the eventElement.");return}}else{console.log("Please provide either a sourceURL or an eventElement in the constructor");return}}}},disableElement:function(){this.eventElement.data("disabled",true)},sendAjaxRequest:function(){var h=this;if(!this.url){this.determineURL()}var i=this.url;e.ajax({type:"GET",dataType:"json",url:i,success:function(j){h.parseAjaxSuccessResponse(j)},error:function(j,l,k){h.parseAjaxErrorResponse(j)}})},parseAjaxSuccessResponse:function(h){if(this.settings.removeEventElementParent){this.eventElement.parent().remove()}var i=h;var k=this.settings.handlebarsTemplate.html();var j=Handlebars.compile(k);this.eventElement.data("disabled",false);this.settings.appendTo.append(j(i));this.url="";this.primeEventListeners()},parseAjaxErrorResponse:function(h){this.eventElement.data("disabled",false);console.log(h)}};e.fn[d]=function(h){return this.each(function(){var i=e.extend({},f,h);if(!e.data(this,"plugin_"+d)){e.data(this,"plugin_"+d,new c(this,i))}},h)}})(jQuery,window,document);